<template>
  <div class="navbar-main">
    <div class="logo">
      <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        viewBox="0 0 201.387 201.387" style="enable-background:new 0 0 201.387 201.387;" xml:space="preserve">
      <g>
        <g>
          <path d="M129.413,24.885C127.389,10.699,115.041,0,100.692,0C91.464,0,82.7,4.453,77.251,11.916
            c-1.113,1.522-0.78,3.657,0.742,4.77c1.517,1.109,3.657,0.78,4.768-0.744c4.171-5.707,10.873-9.115,17.93-9.115
            c10.974,0,20.415,8.178,21.963,19.021c0.244,1.703,1.705,2.932,3.376,2.932c0.159,0,0.323-0.012,0.486-0.034
            C128.382,28.479,129.679,26.75,129.413,24.885z"/>
        </g>
      </g>
      <g>
        <g>
          <path d="M178.712,63.096l-10.24-17.067c-0.616-1.029-1.727-1.657-2.927-1.657h-9.813c-1.884,0-3.413,1.529-3.413,3.413
            s1.529,3.413,3.413,3.413h7.881l6.144,10.24H31.626l6.144-10.24h3.615c1.884,0,3.413-1.529,3.413-3.413s-1.529-3.413-3.413-3.413
            h-5.547c-1.2,0-2.311,0.628-2.927,1.657l-10.24,17.067c-0.633,1.056-0.648,2.369-0.043,3.439s1.739,1.732,2.97,1.732h150.187
            c1.231,0,2.364-0.662,2.97-1.732S179.345,64.15,178.712,63.096z"/>
        </g>
      </g>
      <g>
        <g>
          <path d="M161.698,31.623c-0.478-0.771-1.241-1.318-2.123-1.524l-46.531-10.883c-0.881-0.207-1.809-0.053-2.579,0.423
            c-0.768,0.478-1.316,1.241-1.522,2.123l-3.509,15c-0.43,1.835,0.71,3.671,2.546,4.099c1.835,0.43,3.673-0.71,4.101-2.546
            l2.732-11.675l39.883,9.329l-6.267,26.795c-0.43,1.835,0.71,3.671,2.546,4.099c0.263,0.061,0.524,0.09,0.782,0.09
            c1.55,0,2.953-1.062,3.318-2.635l7.045-30.118C162.328,33.319,162.176,32.391,161.698,31.623z"/>
        </g>
      </g>
      <g>
        <g>
          <path d="M102.497,39.692l-3.11-26.305c-0.106-0.899-0.565-1.72-1.277-2.28c-0.712-0.56-1.611-0.816-2.514-0.71l-57.09,6.748
            c-1.871,0.222-3.209,1.918-2.988,3.791l5.185,43.873c0.206,1.737,1.679,3.014,3.386,3.014c0.133,0,0.27-0.009,0.406-0.024
            c1.87-0.222,3.208-1.918,2.988-3.791l-4.785-40.486l50.311-5.946l2.708,22.915c0.222,1.872,1.91,3.202,3.791,2.99
            C101.379,43.261,102.717,41.564,102.497,39.692z"/>
        </g>
      </g>
      <g>
        <g>
          <path d="M129.492,63.556l-6.775-28.174c-0.212-0.879-0.765-1.64-1.536-2.113c-0.771-0.469-1.696-0.616-2.581-0.406L63.613,46.087
            c-1.833,0.44-2.961,2.284-2.521,4.117l3.386,14.082c0.44,1.835,2.284,2.964,4.116,2.521c1.833-0.44,2.961-2.284,2.521-4.117
            l-2.589-10.764l48.35-11.626l5.977,24.854c0.375,1.565,1.775,2.615,3.316,2.615c0.265,0,0.533-0.031,0.802-0.096
            C128.804,67.232,129.932,65.389,129.492,63.556z"/>
        </g>
      </g>
      <g>
        <g>
          <path d="M179.197,64.679c-0.094-1.814-1.592-3.238-3.41-3.238H25.6c-1.818,0-3.316,1.423-3.41,3.238l-6.827,133.12
            c-0.048,0.934,0.29,1.848,0.934,2.526c0.645,0.677,1.539,1.062,2.475,1.062h163.84c0.935,0,1.83-0.384,2.478-1.062
            c0.643-0.678,0.981-1.591,0.934-2.526L179.197,64.679z M22.364,194.56l6.477-126.293h143.701l6.477,126.293H22.364z"/>
        </g>
      </g>
      <g>
        <g>
          <path d="M126.292,75.093c-5.647,0-10.24,4.593-10.24,10.24c0,5.647,4.593,10.24,10.24,10.24c5.647,0,10.24-4.593,10.24-10.24
            C136.532,79.686,131.939,75.093,126.292,75.093z M126.292,88.747c-1.883,0-3.413-1.531-3.413-3.413s1.531-3.413,3.413-3.413
            c1.882,0,3.413,1.531,3.413,3.413S128.174,88.747,126.292,88.747z"/>
        </g>
      </g>
      <g>
        <g>
          <path d="M75.092,75.093c-5.647,0-10.24,4.593-10.24,10.24c0,5.647,4.593,10.24,10.24,10.24c5.647,0,10.24-4.593,10.24-10.24
            C85.332,79.686,80.739,75.093,75.092,75.093z M75.092,88.747c-1.882,0-3.413-1.531-3.413-3.413s1.531-3.413,3.413-3.413
            s3.413,1.531,3.413,3.413S76.974,88.747,75.092,88.747z"/>
        </g>
      </g>
      <g>
        <g>
          <path d="M126.292,85.333h-0.263c-1.884,0-3.413,1.529-3.413,3.413c0,0.466,0.092,0.911,0.263,1.316v17.457
            c0,12.233-9.953,22.187-22.187,22.187s-22.187-9.953-22.187-22.187V88.747c0-1.884-1.529-3.413-3.413-3.413
            s-3.413,1.529-3.413,3.413v18.773c0,15.998,13.015,29.013,29.013,29.013s29.013-13.015,29.013-29.013V88.747
            C129.705,86.863,128.176,85.333,126.292,85.333z"/>
        </g>
      </g>
      <g>
      </g>
      <g>
      </g>
      <g>
      </g>
      <g>
      </g>
      <g>
      </g>
      <g>
      </g>
      <g>
      </g>
      <g>
      </g>
      <g>
      </g>
      <g>
      </g>
      <g>
      </g>
      <g>
      </g>
      <g>
      </g>
      <g>
      </g>
      <g>
      </g>
      </svg>
      <h1>Shop Easy!</h1>
    </div>

    <!-- <div class="navbar-search">
      <input type="text" name="search" id="search" placeholder="Search for products...">
    </div> -->

    <div class="navbar-nav">
      <nav>
        <li class="cart">
          <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
  viewBox="0 0 450.391 450.391" style="enable-background:new 0 0 450.391 450.391;" xml:space="preserve">
<g>
  <g>
    <g>
      <path d="M143.673,350.322c-25.969,0-47.02,21.052-47.02,47.02c0,25.969,21.052,47.02,47.02,47.02
        c25.969,0,47.02-21.052,47.02-47.02C190.694,371.374,169.642,350.322,143.673,350.322z M143.673,423.465
        c-14.427,0-26.122-11.695-26.122-26.122c0-14.427,11.695-26.122,26.122-26.122c14.427,0,26.122,11.695,26.122,26.122
        C169.796,411.77,158.1,423.465,143.673,423.465z"/>
      <path d="M342.204,350.322c-25.969,0-47.02,21.052-47.02,47.02c0,25.969,21.052,47.02,47.02,47.02s47.02-21.052,47.02-47.02
        C389.224,371.374,368.173,350.322,342.204,350.322z M342.204,423.465c-14.427,0-26.122-11.695-26.122-26.122
        c0-14.427,11.695-26.122,26.122-26.122s26.122,11.695,26.122,26.122C368.327,411.77,356.631,423.465,342.204,423.465z"/>
      <path d="M448.261,76.037c-2.176-2.377-5.153-3.865-8.359-4.18L99.788,67.155L90.384,38.42
        C83.759,19.211,65.771,6.243,45.453,6.028H10.449C4.678,6.028,0,10.706,0,16.477s4.678,10.449,10.449,10.449h35.004
        c11.361,0.251,21.365,7.546,25.078,18.286l66.351,200.098l-5.224,12.016c-5.827,15.026-4.077,31.938,4.702,45.453
        c8.695,13.274,23.323,21.466,39.184,21.943h203.233c5.771,0,10.449-4.678,10.449-10.449c0-5.771-4.678-10.449-10.449-10.449
        H175.543c-8.957-0.224-17.202-4.936-21.943-12.539c-4.688-7.51-5.651-16.762-2.612-25.078l4.18-9.404l219.951-22.988
        c24.16-2.661,44.034-20.233,49.633-43.886l25.078-105.012C450.96,81.893,450.36,78.492,448.261,76.037z M404.376,185.228
        c-3.392,15.226-16.319,26.457-31.869,27.69l-217.339,22.465L106.58,88.053l320.261,4.702L404.376,185.228z"/>
    </g>
  </g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
          </svg>
          <p @click="openCart">Bag({{ cart.length }})</p>
        </li>
        <!-- <li>
          <router-link to="/" v-if="user">
            <button class="login">
              Dashboard
            </button>
          </router-link>

          <router-link to="/sign-up" v-else>
            <button class="login">
              Create account
            </button>
          </router-link>
        </li> -->
      </nav>
    </div>
  </div>

  <div class="shopping-cart" v-if="!cartOpen">
    <div class="shopping-cart-header">
      <i class="fa fa-shopping-cart cart-icon"></i><span class="badge">3</span>
      <div class="shopping-cart-total">
        <span class="lighter-text">Total:</span>
        <!-- <span class="main-color-text">$2,229.97</span> -->
      </div>
    </div> <!--end shopping-cart-header -->

    <ul class="shopping-cart-items">
      <li class="clearfix" v-for="item in cart" :key="item.id">
        <img :src="productInfo.image" alt="admin">
        <span class="item-name">{{ item.name }}</span>
        <span class="item-price">${{ item.price }}</span>
      </li>
    </ul>

    <a href="#" class="button">Checkout</a>
  </div> <!--end shopping-cart -->
</template>

<script>
import { supabase } from '../supabase'
import { ref, onBeforeMount, computed } from 'vue'
import { useStore } from 'vuex'

export default {
  setup() {
    const store = useStore()
    const user = supabase.auth.user()
    const cartOpen = ref(true)

    const openCart = () => {
      cartOpen.value = !cartOpen.value
    }

    const closeCart = () => {
      cartOpen.value = true
    }

    // onBeforeMount(() => {
      
    //   }
    // })

    return {
      user,
      cart: computed(() => store.getters.getCart),
      cartOpen,
      openCart,
      closeCart
    }
  }
}
</script>

<style scoped>
.navbar-main {
  background: rgba( 55, 25, 213, 0.75 );
  box-shadow: 0 8px 32px 0 rgba( 31, 38, 135, 0.37 );
  backdrop-filter: blur( 9px );
  -webkit-backdrop-filter: blur( 9px );
  border: 1px solid rgba( 255, 255, 255, 0.18 );
  /* background-image: linear-gradient(to right top, #6138d6, #5d32dd, #5a2be3, #5523ea, #5018f0); */
  position: fixed;
  top: 0;
  right: 0;
  left: 0;
  z-index: 999;
  padding: 10px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  /* box-shadow: 0px 4px 5px -2px rgba(54,50,50,0.53);
  -webkit-box-shadow: 0px 4px 5px -2px rgba(54,50,50,0.53);
  -moz-box-shadow: 0px 4px 5px -2px rgba(54,50,50,0.53); */
}

.logo {
  display: flex;
  align-items: center;
  justify-content: center;
}

.logo svg {
  margin-right: 10px;
  width: 35px;
  fill: #fff;
  font-weight: bold;
}

.logo h1 {
  font-family: 'Cookie', cursive;
  color: #fff;
}

.navbar-search input {
  width: 250px;
  background: transparent;
  padding: 10px;
  border: 1px solid #fff;
  border-radius: 10px;
}

.navbar-search input::placeholder {
  font-weight: bold;
  color: #fff;
}

.navbar-nav nav {
  display: flex;
  align-items: center;
  justify-content: center;
}

.navbar-nav nav li {
  list-style-type: none;
  padding: 15px;
  cursor: pointer;
  font-weight: 400;
  color: #fff;
}

.navbar-nav nav .cart {
  display: flex;
  align-items: center;
  justify-content: center;
}

.navbar-nav nav .cart svg {
  width: 23px;
  margin-right: 7px;
  fill: #fff;
}

.navbar-nav nav .cart p {
  font-weight: bold;
  font-size: 18px;
}

.navbar-nav nav li:hover {
  color: #e3e2f0;
  transition: 0.2s ease-in;
}

.navbar-nav nav li a .login {
  border: none;
  outline: none;
  padding: 10px 20px;
  border-radius: 10px;
  background: #4438d6;
  color: #fff;
  font-size: 18px;
}

.navbar-nav nav li a .login:hover {
  cursor: pointer;
  background: #1601fd;
}

@media(max-width: 800px) {
  .navbar-main {
    padding: 10px 7px;
  }

  .navbar-search {
    display: none;
  }

  .navbar-nav nav li a .login {
    padding: 7px 10px;
    font-size: 10px;
  }

  .navbar-nav nav li {
    padding: 8px;
  }

  .navbar-nav nav .cart svg {
    width: 18px;
    margin-right: 5px;
  }

  .navbar-nav nav .cart p {
    font-size: 13px;
  }
}

@import url(https://fonts.googleapis.com/css?family=Lato:300,400,700);
@import url(https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css);

.shopping-cart {
  margin: 20px 0;
  float: right;
  background: white;
  width: 320px;
  position: relative;
  border-radius: 3px;
  padding: 20px;
}
.shopping-cart .shopping-cart-header {
  border-bottom: 1px solid #E8E8E8;
  padding-bottom: 15px;
}
.shopping-cart .shopping-cart-header .shopping-cart-total {
  float: right;
}
.shopping-cart .shopping-cart-items {
  padding-top: 20px;
}
.shopping-cart .shopping-cart-items li {
  margin-bottom: 18px;
}
.shopping-cart .shopping-cart-items img {
  float: left;
  margin-right: 12px;
}
.shopping-cart .shopping-cart-items .item-name {
  display: block;
  padding-top: 10px;
  font-size: 16px;
}
.shopping-cart .shopping-cart-items .item-price {
  color: #6394F8;
  margin-right: 8px;
}
.shopping-cart .shopping-cart-items .item-quantity {
  color: #ABB0BE;
}
.shopping-cart:after {
  bottom: 100%;
  left: 89%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none;
  border-bottom-color: white;
  border-width: 8px;
  margin-left: -8px;
}
.cart-icon {
  color: #515783;
  font-size: 24px;
  margin-right: 7px;
  float: left;
}
.button {
  background: #6394F8;
  color: white;
  text-align: center;
  padding: 12px;
  text-decoration: none;
  display: block;
  border-radius: 3px;
  font-size: 16px;
  margin: 25px 0 15px 0;
}
.button:hover {
  background: #729ef9;
}
.clearfix:after {
  content: "";
  display: table;
  clear: both;
}


</style>